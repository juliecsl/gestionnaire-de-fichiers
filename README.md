# Gestionnaire de Fichiers en Commandes en Ligne avec Annotations
*R√©alis√© par Julie Ciesla et Ana√´l Messan*
![-----------------------------------------------------](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png)

<!-- TABLE OF CONTENTS -->
<details>
  <summary>Table des mati√®res</summary>
  <ol>
    <li><a href="#üéØ-objectif-du-projet">Objectif du projet</a></li>
    <li>
      <a href="#üìë-manuel-utilisateur">Manuel utilisateur</a>
        <ul>
        <li><a href="#quest-ce-que-le-ner">Qu'est ce que le NER ?</a></li>
        <li><a href="#modifier-le-NER-courant">Modifier le NER courant</a></li>
        <li><a href="#copier-un-fichier-ou-dossier">Copier un fichier ou dossier</a></li>
        <li><a href="#couper-un-fichier-ou-dossier">Couper un fichier ou dossier</a></li>
        <li><a href="#coller-un-fichier-ou-dossier">Coller un fichier ou dossier</a></li>
        <li><a href="#supprimer-un-fichier-ou-dossier">Supprimer un fichier ou dossier</a></li>
        <li><a href="#remonter-dans-le-r√©pertoire-parent">Remonter dans le r√©pertoire parent</a></li>
        <li><a href="#entrer-dans-un-r√©pertoire">Entrer dans un r√©pertoire</a></li>
        <li><a href="#cr√©er-un-r√©pertoire">Cr√©er un r√©pertoire</a></li>
        <li><a href="#visualiser-le-contenu-dun-fichier">Visualiser le contenu d'un fichier</a></li>
        <li><a href="#rechercher-des-fichiersr√©pertoires-dont-les-noms-contiennent-un-certain-motif">Rechercher fichier/r√©pertoire par nom</a></li>
        <li><a href="#ajouter-une-note-√†-un-fichierr√©pertoire">Ajouter une note</a></li>
        <li><a href="#supprimer-une-note-associ√©e-√†-un-fichierr√©pertoire">Supprimer une note</a></li>
        <li><a href="#quitter-le-programme">Quitter le programme</a></li>
      </ul>
    </li>
    <li><a href="#üõ†Ô∏è-manuel-technique">Manuel technique</a></li>
      <ul>
        <li><a href="#installation---versions">Installation - versions</a></li>
        <li><a href="#compilation-du-projet">Compilation du projet</a></li>
        <li><a href="#execution-de-lapplication">Execution de l'application</a></li>
        <li><a href="#consultation-du-code-de-courverture">Consultation du code de courverture</a></li>
        <li><a href="#execution-de-lapplication">Execution de l'application</a></li>
        <li><a href="#classes-impl√©ment√©es">Classes impl√©ment√©es</a></li>
        <li><a href="#biblioth√®ques-utilis√©es">Biblioth√®ques utilis√©es</a></li>
        <li><a href="#gestion-des-entr√©es-utilisateur">Gestion des entr√©es utilisateur</a></li>
      </ul>
    <li><a href="#üìÇ-contenu-du-projet">Contenu du projet</a></li>
    <li><a href="#üí≠-axes-dam√©lioration">Axes d'am√©lioration</a></li>
  </ol>
</details>


## üéØ Objectif du projet
<p style="text-align:justify;"> L'objectif du projet est de d√©velopper un gestionnaire de fichiers en ligne de commande en Java, par groupes de deux √©tudiants collaborant √† travers un r√©f√©rentiel Git commun. Le gestionnaire  doit permettre d'effectuer des op√©rations telles que copier, couper, remonter dans le syst√®me de fichiers, cr√©er des r√©pertoires, visualiser le contenu des fichiers, et annoter les √©l√©ments du r√©pertoire. Les annotations sont stock√©es dans un fichier "notes" dans le r√©pertoire courant. </p>

![-----------------------------------------------------](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png)
## üìë Manuel utilisateur
Les commandes suivantes sont √† [ex√©cuter dans le fichier `explorer-1.0.jar`](#execution-de-lapplication) disponible dans le dossier `target` apr√®s avoir [compil√© le projet](#compilation-du-projet).

Les commandes doivent √™tre saisies au clavier sous la forme:   ```[<NER>] [<commande>] [<nom>]```  
L'utilisateur pourra s'aider de l'auto-compl√©tion pour entrer le nom des commandes.
Les crochets signifiant "optionnel" et NER repr√©sentant le num√©ro du fichier sur l'affichage.

### Qu'est-ce que le NER ?
Le NER est un num√©ro associ√© √† un fichier (ou dossier) qui permet de le designer lors de l‚Äôutilisation d‚Äôune des commandes.
Le NER est pr√©sent dans l'affichage √† gauche du nom des fichiers et dossiers.

Si l‚Äôutilisateur ne place pas de NER, c‚Äôest le dernier NER utilis√© qui sera utilis√© pour une commande qui en n√©cessite.

### Modifier le NER courant
La commande `<NER>` permet d'inititaliser ou modifier le NER courant.  

### Exemple d'affichage
L'affichage ci-dessous servira d'exemples pour la pr√©sentation des commandes.
```
Contenu de : Dossier1/dossier2/dossier3
001 fable.pdf
002 rafale.txt
003 SousDossier

Entrer une commande:
```

Sur la premi√®re ligne de l'affichage on retrouve le chemin du r√©pertoire courant.
De la seconde ligne √† la quatri√®me, dans cet exemple, √† gauche sont indiqu√© les num√©ros NER et √† droite les noms des fichiers/dossiers contenues dans le r√©pertoire courant.
Enfin la derni√®re ligne propose √† l'utilisateur d'entrer une commande.

### Copier un fichier ou dossier
La commande `[<NER>] copy` permet de copier un fichier ou un dossier.

[Exemples](#exemple-daffichage):
```
1 copy  # Pour copier le fichier fable.pdf
2 copy  # Pour copier le fichier rafale.txt
3 copy  # Pour copier le r√©pertoire SousDossier
copy    # Pour copier le r√©pertoire SousDossier
```

### Coller un fichier ou dossier
La commande `past` permet de coller un fichier ou un dossier. Il est n√©cessaire d'utiliser au pr√©alable la commande [`copy`](#copier-un-fichier-ou-dossier) pour pouvoir coller un √©l√©ment ou la commande [`cut`](#couper-un-fichier-ou-dossier) pour pouvoir couper un √©l√©ment.

Si l'√©l√©ment coller est de m√™me nom qu'un fichier/dossier d√©j√† existant dans le r√©pertoire alors le nom de l'√©l√©ment est concaten√© √† "-copy". 

### Couper un fichier ou dossier
La commande `[<NER>] cut` permet de couper un fichier ou un dossier. 

[Exemples](#exemple-daffichage):
```
1 cut  # coupe le fichier fable.pdf
2 cut  # coupe le fichier rafale.pdf
3 cut  # coupe le r√©pertoire sousDossier
cut    # coupe le r√©pertoire sousDossier
```

> **Attention**: lorsque l'on coupe un fichier/dossier son annotation est supprim√©e sans etre retransf√©r√©e dans le dossier dans lequel le fichier/dossier a √©t√© coll√©. 

### Supprimer un fichier ou dossier
La commande `[<NER>] del` permet de supprimer un fichier ou un dossier.

[Exemples](#exemple-daffichage):
```
1 del  # coupe le fichier fable.pdf
2 del  # coupe le fichier rafale.pdf
3 del  # coupe le r√©pertoire sousDossier
```

> Remarque: Lorsqu'un fichier/dossier est supprim√© sa note est aussi supprim√©e.

### Remonter dans le r√©pertoire parent
La commande `..` permet de se d√©placer dans le r√©pertoire parent.
 
### Entrer dans un r√©pertoire
La commande `[<NER>] .` permet d'entrer dans un **r√©pertoire**.

[Exemple](#exemple-daffichage):
```
3 .   # Pour entrer dans le r√©pertoire SousDossier 
```

### Cr√©er un r√©pertoire
La commande `mkdir <nom r√©pertoire>` permet de cr√©er un ou plusieurs sous-r√©pertoire dans le r√©pertoire courant.

[Exemples](#exemple-daffichage):
```
mkdir nouveau dossier
mkdir un sous repertoire/un autre
```
Pour la premi√®re commande un dossier nomm√© "nouveau dossier" sera cr√©√©. Pour la seconde commande un r√©pertoire nomm√© "un sous repertoire" sera cr√©√© et ce r√©pertoire contiendra un r√©pertoire nomm√© "un autre".

### Visualiser le contenu d'un fichier
La commande `[<NER>] visu` permet de visualiser le contenu d'un **fichier** au format texte (.txt ou .text) et pour les **fichiers** non texte d'afficher leur taille en octet(s). 

[Exemples](#exemple-daffichage):
```
1 visu  # Affiche la taille de fable.pdf en octets
2 visu  # Affiche le contenu de rafale.txt
```


### Rechercher des fichiers/r√©pertoires dont les noms contiennent un certain motif
La commande `find <motif>` permet de rechercher dans tous les sous r√©pertoires du r√©pertoire courant, le(s) fichier(s)/dossier(s) qui contiennent le motif "motif". La r√©sultat de cette commande permet d'afficher le nom des fichiers et r√©pertoires contenant le motif ainsi que le chemin de ces fichiers/r√©pertoires.

> **Attention**: le motif est sensible √† la casse.


### Ajouter une note √† un fichier/r√©pertoire
La commande `[<NER>] + text` permet d'ajouter du texte informatif √† propos du fichier/dossier d√©sign√© par le NER.

[Exemples](#exemple-daffichage):
```
1 + "ceci est un texte"  
2 + "voici un autre texte
3 + "je suis un texte"
```

### Supprimer une note associ√©e √† un fichier/r√©pertoire
La commande `[<NER>] -` permet de supprimer la note associ√© au fichier.dossier associ√© au NER. Si aucune note n'existait au pr√©alable cela ne renvoie pas d'erreur.

[Exemples](#exemple-daffichage):
```
1 -
2 -
3 -
```

### Quitter le programme
Pour pouvoir sortir du programme il fait appyuer sur les touches `Ctrl + C`.

![-----------------------------------------------------](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png)
## üõ†Ô∏è Manuel technique

### Installation - versions
- **Java**: version 17
- **JUnit5**: version 5.9.1
- **Jacoco**: 0.8.11
- **Apache Commons IO**: version 2.15.0

### Compilation du projet
Sous Linux
```
$ ./mvnw package
```

Sous Windows
```
> .\mvnw.cmd package  
```

ou

```
> mvn package  
```

### Execution de l'application
```
$ java -jar target/explorer-1.0.jar
```
### Consultation du code de courverture
Entrer la ligne de commande suivante:
```
mvn clean test jacoco:report
```
Puis aller dans `\target\site\jacoco\index.html`.

### Classes impl√©ment√©es

Pour ce projet nous avons impl√©ment√© XX classes, leurs roles sont les suivants:
- [**Commandes**](src/main/java/fr/uvsq/cprog/Commandes.java): fournit des m√©thodes facilitant la gestion des fichiers et r√©pertoires en Java. Elle permet notamment de visualiser le contenu d'un fichier texte, de cr√©er des r√©pertoires, de v√©rifier l'existence d'un chemin, de copier, coller, couper et renommer des fichiers et repertoires, de manipuler des r√©pertoires (y entrer et y sortir), ainsi que de g√©rer la suppression de fichiers ou r√©pertoires, tout en fournissant des m√©canismes de gestion des erreurs.

-  [**Annotation**](src/main/java/fr/uvsq/cprog/Annotation.java): fournit des m√©thodes pour annoter des fichiers (nom du fichier + texte informatif) en stockant ces informations dans un fichier s√©rialis√© au format XML nomm√© "notes.xml". Cette classe propose des m√©thodes permettant d'ajouter, de consulter et de supprimer des annotations associ√©es √† des fichiers.

- [**Fichier**](src/main/java/fr/uvsq/cprog/Fichier.java): La classe Fichier repr√©sente un objet s√©rialisable "Fichier" avec deux attributs : un nom et un texte associ√©. Elle est destin√©e √† √™tre utilis√©e en parall√®le avec la classe Annotation pour stocker des informations sur des fichiers dans un fichier s√©rialis√© au format XML.

- [**CLI**](src/main/java/fr/uvsq/cprog/Cli.java): Cette classe repr√©sente les diff√©rentes parties d'une commande entr√©e par l'utilisateur. 
Elle est impl√©ment√©e de telle mani√®re √† repr√©senter la derni√®re commande de l'utilisateur avec le dernier NER entr√©.
Les m√©thodes de cette classe permettent de tra√Æter les entr√©es utilisateurs, c'est-√†-dire reconna√Ætre si une entr√©e est valide et l'op√©ration que l'utilisateur souhaite r√©aliser.
- [**App**](src/main/java/fr/uvsq/cprog/App.java): C'est la classe principale du programme. Elle ne contient qu'une m√©thode principale qui instancie les classes Cli et Repertoire et appelle les m√©thodes de classes des diff√©rentes classes du programme.
- [**Repertoire**](src/main/java/fr/uvsq/cprog/Repertoire.java): Cette classe repr√©sente le r√©pertoire courant avec ses √©l√©ments sous forme de liste de chemins de fichiers. Elle fournit notamment les m√©thodes qui permettent d'afficher ces √©l√©ments, d'afficher la note associ√©e √† l'√©l√©ment courant et de construire et actualiser la liste des √©l√©ments de ce r√©pertoire. C'est dans cette classe qu'est stock√© le presse papier (sous forme de chemin) lorsque l'on souhaite couper ou copier un √©l√©ment.


### Biblioth√®ques utilis√©es
1. Apache Commons IO

La biblioth√®que Apache Commons IO est utilis√©e pour simplifier certaines op√©rations de gestion de fichiers, notamment la copie r√©cursive de r√©pertoires et la suppression r√©cursive.

2. Java.io

- **BufferedReader** : Utilis√© pour lire le contenu d'un fichier ligne par ligne.
- **File** : Fournit une abstraction pour repr√©senter les chemins de fichiers ou de r√©pertoires.
- **FileReader** : Utilis√© pour cr√©er un flux de caract√®res √† partir d'un fichier.
- **IOException** : Traite les exceptions.
- **Serializable**:  Utilis√© pour pouvoir s√©rialiser les instances de la classe Fichier.
- **FileInputStream**: Pour lire des octects √† partir d'un fichier au format XML.
- **FileOutputStream**: Pour √©crire des octects dans un fichier au format XML.

3. Java.nio.file
- **FileSystems** : Pour permettre de cr√©er des objets Path √† partir de cha√Ænes de caract√®res.
- **Files** : Pour effectuer diverses op√©rations sur les fichiers, telle que la v√©rification de l'existence d'un chemin.
- **Path** : Pour permettre de repr√©senter un chemin de fichier ou de r√©pertoire.

4. Java.util
- **ArrayList** : Utilis√©e pour stocker et manipuler des listes dynamiques. Utilis√©es principalement pour stocker des r√©sultats et objets.
- **List** : Utilis√©e pour repr√©senter des listes et pour ofurnir des m√©thodes pour manipuler les √©l√©ments de la liste, tels que l'ajout, la suppression et l'acc√®s aux √©l√©ments.
- **stream.Collectors** : Utilis√©e pour convertir des flux en listes.

5. Java.beans

Utilis√©e pour la s√©rialisation et d√©s√©rialisation d'objets en format XML.
- **XMLEncoder**: Pour convertir des objects en document au format XML.
- **XMLDecoder**: Pour lire des documents au format XML et les convertire en objects Java.

6. org.junit.jupiter.api
- **Test**: permet l'execution de tests unitaires.
- **AfterAll**: principalement utilis√©e pour supprimer des fichiers cr√©es par des tests.
- **AfterEach**: principalement utilis√©e pour supprimer des fichiers cr√©es par des tests.

7. org.junit.jupiter.api.Assertions
- **assterDoesNotThrow**: utilis√©e pour v√©rifier qu'aucune exception n'est lanc√©e.
- **assertEquals**: utilis√© pour v√©rifier si deux valeurs sont √©gales.
- **assertThrows**: utilis√©e pour qu'une exception est lev√©e.
- **assertTrue**: utilis√©e pour v√©rifier si une condition est vraie.

8. org.fusesource.jansi
- **AnsiConsole** et **Ansi.ansi**: utilis√©es pour l'affichage en conjonction avec Jline.

9. org.jline.reader
- **LineReader**: utilis√©e pour acq√©rir les entr√©es utilisateur.

### Gestion des entr√©es utilisateur
Pour d√©terminer la commande de l'utilisateur, le programme effectue les op√©rations suivantes:
- S√©paration en 2 des √©l√©ments de la commande au premier espace rencontr√©.
  - Si le premier √©l√©ment est un NER valide: la commande est s√©par√©e en 3 au niveau des espaces.
- Le type de la commande est ensuite stock√© dans l'instance de la classe Cli.
- S'il y'a un √©l√©ment apr√®s la commande (2nde ou 3√®me partie de l'entr√©e utilisateur), celui-ci est aussi stock√© dans l'objet.
- Enfin, le cas √©ch√©ant, le nouveau NER est stock√© dans l'objet.

Exemple: `3 + une note`
- S√©paration:  
`["3", "+ une note"]`  c'est une commande avec NER, on sait donc que l'on va trouver la commande apr√®s le 1er espace.  
- S√©paration:  
`["3", "+", "une note"]` c'est une commande pour ajouter une annotation : on stocke cette information dans Cli..ommande. On sait aussi que cette commande prend en argument le texte de la note. On le stocke donc dans Cli.nom (d√©signe l'argument de la commande). Enfin, on va stocker le NER sous forme d'entier.

![-----------------------------------------------------](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png)
## üìÇ Contenu du projet

```
.
‚îú‚îÄ‚îÄ 1-fichierTest
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 1-fichierTest2
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ vide.txt
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fable.pdf
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fable.txt
‚îú‚îÄ‚îÄ 2-fichierTest3
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 1-UnAutreDossier
‚îÇ¬†¬† |   ‚îú‚îÄ‚îÄ 1-SousDossier
‚îÇ¬†¬† |   |   ‚îî‚îÄ‚îÄ fable.txt
‚îÇ¬†¬† |   ‚îú‚îÄ‚îÄ fable.pdf
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ rafale.txt
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ vide.txt
‚îú‚îÄ‚îÄ 3-fichierTestAffNote
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ notes.xml
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ unFichier.txt
‚îú‚îÄ‚îÄ 4-fichierTestBis
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 1-fichierTest2
‚îÇ¬†¬† |   ‚îî‚îÄ‚îÄ vide.txt
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ fable.pdf
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ fable.txt
‚îú‚îÄ‚îÄ 5-src
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ 1-main\java\uvsq\cprog
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Annotation.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ App.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Cli.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Commandes.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Fichier.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Repertoire.java
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ 2-test\java\uvsq\cprog
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AnnotationTest.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CliTest.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ CommandesTest.java
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ RepertoireTest.java
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ Documentation.md
‚îú‚îÄ‚îÄ fable.pdf
‚îú‚îÄ‚îÄ fable.txt
‚îú‚îÄ‚îÄ mvnw
‚îú‚îÄ‚îÄ mvnw.cmd
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ README.adoc
‚îî‚îÄ‚îÄ vide.txt
```

![-----------------------------------------------------](https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png)

## üí≠ Axes d'am√©lioration
Pour am√©liorer notre projet nous pourrions dans la commande `[<NER>] visu` g√©rer l'affichage de fichier au format .png ou .jpg.
Pour le faire dans une console, il faudrait lire les pixels de l'image avec la biblioth√®que **java.awt.image** puis les repr√©senter √† l'aide de **JAnsi** ou **JColor**.  

Nous pourrions aussi ajouter les commandes suivantes:
- Cr√©ation de nouveaux fichiers.
- Permettre d'afficher les fichiers/dossiers selon un ordre voulu par l'utilisateur tels que ordre alphab√©thique, date de modification, taille de fichier ...
- Affichage les propri√©t√©s d'un fichier (date de cr√©ation, date de derni√®re modification, taille du fichier, type d'extension...).
- Renommer des fichiers et r√©pertoires.
- Mimer la commande `cd` de bash.

